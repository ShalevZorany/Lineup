<!DOCTYPE html>
<html lang="he">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Line-Up Builder</title>
<style>
/* —— בסיס —— */
body{margin:0;font-family:Arial,Helvetica,sans-serif;text-align:center}
h1{margin-top:1rem}
#controls{margin:.8rem auto;max-width:600px;display:flex;gap:.5rem;flex-wrap:wrap;justify-content:center}
select,button{padding:.35rem .75rem;font-size:1rem}

/* —— מגרש (פרופורציות רשמיות 105×68) —— */
#field{
  width:min(80vw,500px);              /* כווץ במסכים צרים */
  aspect-ratio:68/105;                /* מקבע יחס 0.6476 */
  position:relative;
  margin:0 auto 1.5rem;
  background:#2f8e3d;                 /* ירוק בסיס */
  background:repeating-linear-gradient(90deg,#2f8e3d 0 5%,#2a8137 5% 10%); /* פסים כל 5% */
  border:2px solid #fff;              /* קווי חוץ */
  box-sizing:border-box;
  user-select:none;
}

/* אלמנטים קבועים במגרש */
.pitch-lines{position:absolute;inset:0;pointer-events:none}
.center-line{position:absolute;top:0;left:50%;transform:translateX(-50%);width:2px;height:100%;background:#fff}
.center-circle{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:27%;aspect-ratio:1/1;border:2px solid #fff;border-radius:50%}

/* — רחבת ה-16 (Penalty Area) — */
.penalty-area{position:absolute;width:59.3%;left:20.35%;height:15.7%;border:2px solid #fff}
.penalty-area.top{top:0;border-top:none}
.penalty-area.bottom{bottom:0;border-bottom:none}

/* — רחבת ה-5 (Goal Area) — */
.goal-area{position:absolute;width:26.94%;left:36.53%;height:5.24%;border:2px solid #fff}
.goal-area.top{top:0;border-top:none}
.goal-area.bottom{bottom:0;border-bottom:none}

/* — נקודת העונשין — */
.penalty-spot{position:absolute;width:6px;height:6px;border-radius:50%;background:#fff}
.penalty-spot.top{top:10.48%;left:50%;transform:translate(-50%,-50%)}
.penalty-spot.bottom{bottom:10.48%;left:50%;transform:translate(-50%,50%)}

/* —— עיצוב שחקן —— */
.player{position:absolute;width:58px;height:58px;border-radius:50%;background:rgba(255,255,255,.85);border:1.8px solid #222;cursor:grab;display:flex;flex-direction:column;align-items:center;justify-content:center;font-weight:bold;touch-action:none}
.player span.number{font-size:1.2rem;line-height:1}
.player span.name{font-size:.7rem}
</style>
</head>
<body>
<h1>Line-Up Builder</h1>
<div id="controls">
  <label>Formation:
    <select id="formationSelect">
      <option value="4-4-2">4-4-2</option>
      <option value="4-3-3">4-3-3</option>
      <option value="3-5-2">3-5-2</option>
      <option value="5-3-2">5-3-2</option>
    </select>
  </label>
  <button id="addPlayerBtn">Add Player</button>
  <button id="resetBtn">Reset Positions</button>
</div>

<!--  מגרש  -->
<div id="field">
  <div class="pitch-lines">
    <div class="center-line"></div>
    <div class="center-circle"></div>
    <div class="penalty-area top"></div>
    <div class="penalty-area bottom"></div>
    <div class="goal-area top"></div>
    <div class="goal-area bottom"></div>
    <div class="penalty-spot top"></div>
    <div class="penalty-spot bottom"></div>
  </div>
</div>

<script>
const field=document.getElementById('field');
const formationSelect=document.getElementById('formationSelect');
const addPlayerBtn=document.getElementById('addPlayerBtn');
const resetBtn=document.getElementById('resetBtn');
let players=[];

function createPlayer(name="Player",number=players.length+1,x=50,y=90){
  const el=document.createElement('div');
  el.className='player';
  el.style.left=`${x}%`;
  el.style.top=`${y}%`;
  el.innerHTML=`<span class="number">${number}</span><span class="name">${name}</span>`;
  field.appendChild(el);
  makeDraggable(el);
  el.ondblclick=()=>{
    const newName=prompt("Player name:",name);
    const newNumber=prompt("Player number:",number);
    if(newName!==null) name=newName;
    if(newNumber!==null) number=newNumber;
    el.querySelector('.name').textContent=name;
    el.querySelector('.number').textContent=number;
  };
  players.push(el);
}

function makeDraggable(el){
  let offsetX,offsetY,dragging=false;
  el.addEventListener('pointerdown',e=>{
    dragging=true;
    el.setPointerCapture(e.pointerId);
    const rect=el.getBoundingClientRect();
    offsetX=e.clientX-rect.left;
    offsetY=e.clientY-rect.top;
  });
  el.addEventListener('pointermove',e=>{
    if(!dragging) return;
    const fieldRect=field.getBoundingClientRect();
    const newX=((e.clientX-fieldRect.left-offsetX)/fieldRect.width)*100;
    const newY=((e.clientY-fieldRect.top-offsetY)/fieldRect.height)*100;
    el.style.left=`${Math.min(Math.max(newX,0),100)}%`;
    el.style.top=`${Math.min(Math.max(newY,0),100)}%`;
  });
  el.addEventListener('pointerup',()=>dragging=false);
}

/* —— מערכים —— */
const formations={
  "4-4-2":[
    [50,97],
    [15,78],[50,78],[85,78],
    [15,55],[37,55],[63,55],[85,55],
    [30,30],[70,30]
  ],
  "4-3-3":[
    [50,97],
    [15,78],[50,78],[85,78],
    [25,57],[50,57],[75,57],
    [15,34],[50,28],[85,34]
  ],
  "3-5-2":[
    [50,97],
    [25,78],[50,78],[75,78],
    [15,57],[35,52],[50,45],[65,52],[85,57],
    [35,28],[65,28]
  ],
  "5-3-2":[
    [50,97],
    [10,78],[30,78],[50,78],[70,78],[90,78],
    [25,55],[50,55],[75,55],
    [35,28],[65,28]
  ]
};

function applyFormation(name){
  clearPlayers();
  formations[name].forEach((pos,i)=>createPlayer(`P${i+1}`,i+1,pos[0],pos[1]));
}
function clearPlayers(){
  players.forEach(p=>p.remove());
  players=[];
}

formationSelect.onchange=()=>applyFormation(formationSelect.value);
addPlayerBtn.onclick=()=>createPlayer(`P${players.length+1}`,players.length+1,50,50);
resetBtn.onclick=()=>applyFormation(formationSelect.value);

applyFormation(formationSelect.value);
</script>
</body>
</html>
